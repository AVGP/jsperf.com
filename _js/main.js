/*! jsbeautifier.org Â© Einar Lielmanis */
function js_beautify(d,z){var c,C,p,P,l,w,A,s,e,Z;var F,V,g,n,u,Y;var N,T,E;var Q,aa,j;z=z?z:{};var O;if(z.space_after_anon_function!==undefined&&z.jslint_happy===undefined){z.jslint_happy=z.space_after_anon_function}if(z.braces_on_own_line!==undefined){O=z.braces_on_own_line?"expand":"collapse"}O=z.brace_style?z.brace_style:(O?O:"collapse");var I=z.indent_size?z.indent_size:4;var h=z.indent_char?z.indent_char:" ";var S=typeof z.preserve_newlines==="undefined"?true:z.preserve_newlines;var x=typeof z.max_preserve_newlines==="undefined"?false:z.max_preserve_newlines;var W=z.indent_level?z.indent_level:0;var q=z.jslint_happy==="undefined"?false:z.jslint_happy;var k=typeof z.keep_array_indentation==="undefined"?false:z.keep_array_indentation;aa=false;var v=d.length;function r(i){i=typeof i==="undefined"?false:i;while(C.length&&(C[C.length-1]===" "||C[C.length-1]===Z||(i&&(C[C.length-1]==="\n"||C[C.length-1]==="\r")))){C.pop()}}function a(i){return i.replace(/^\s\s*|\s\s*$/,"")}function B(ab){s.eat_next_space=false;if(k&&L(s.mode)){return}ab=typeof ab==="undefined"?true:ab;s.if_line=false;r();if(!C.length){return}if(C[C.length-1]!=="\n"||!ab){aa=true;C.push("\n")}for(var t=0;t<s.indentation_level;t+=1){C.push(Z)}if(s.var_line&&s.var_line_reindented){if(h===" "){C.push("    ")}else{C.push(Z)}}}function y(){if(s.eat_next_space){s.eat_next_space=false;return}var i=" ";if(C.length){i=C[C.length-1]}if(i!==" "&&i!=="\n"&&i!==Z){C.push(" ")}}function H(){aa=false;s.eat_next_space=false;C.push(p)}function o(){s.indentation_level+=1}function M(){if(C.length&&C[C.length-1]===Z){C.pop()}}function m(i){if(s){e.push(s)}s={previous_mode:s?s.mode:"BLOCK",mode:i,var_line:false,var_line_tainted:false,var_line_reindented:false,in_html_comment:false,if_line:false,in_case:false,eat_next_space:false,indentation_baseline:-1,indentation_level:(s?s.indentation_level+((s.var_line&&s.var_line_reindented)?1:0):W),ternary_depth:0}}function L(i){return i==="[EXPRESSION]"||i==="[INDENTED-EXPRESSION]"}function D(i){return i==="[EXPRESSION]"||i==="[INDENTED-EXPRESSION]"||i==="(EXPRESSION)"}function f(){E=s.mode==="DO_BLOCK";if(e.length>0){s=e.pop()}}function J(ac,t){for(var ab=0;ab<t.length;ab+=1){if(t[ab]===ac){return true}}return false}function U(){j=0;if(n>=v){return["","TK_EOF"]}Q=false;var aj=c.charAt(n);n+=1;var al=k&&L(s.mode);if(al){var ad=0;while(J(aj,F)){if(aj==="\n"){r();C.push("\n");aa=true;ad=0}else{if(aj==="\t"){ad+=4}else{if(aj==="\r"){}else{ad+=1}}}if(n>=v){return["","TK_EOF"]}aj=c.charAt(n);n+=1}if(s.indentation_baseline===-1){s.indentation_baseline=ad}if(aa){var af;for(af=0;af<s.indentation_level+1;af+=1){C.push(Z)}if(s.indentation_baseline!==-1){for(af=0;af<ad-s.indentation_baseline;af++){C.push(" ")}}}}else{while(J(aj,F)){if(aj==="\n"){j+=((x)?(j<=x)?1:0:1)}if(n>=v){return["","TK_EOF"]}aj=c.charAt(n);n+=1}if(S){if(j>1){for(af=0;af<j;af+=1){B(af===0);aa=true}}}Q=j>0}if(J(aj,V)){if(n<v){while(J(c.charAt(n),V)){aj+=c.charAt(n);n+=1;if(n===v){break}}}if(n!==v&&aj.match(/^[0-9]+[Ee]$/)&&(c.charAt(n)==="-"||c.charAt(n)==="+")){var ac=c.charAt(n);n+=1;var am=U(n);aj+=ac+am[0];return[aj,"TK_WORD"]}if(aj==="in"){return[aj,"TK_OPERATOR"]}if(Q&&P!=="TK_OPERATOR"&&P!=="TK_EQUALS"&&!s.if_line&&(S||l!=="var")){B()}return[aj,"TK_WORD"]}if(aj==="("||aj==="["){return[aj,"TK_START_EXPR"]}if(aj===")"||aj==="]"){return[aj,"TK_END_EXPR"]}if(aj==="{"){return[aj,"TK_START_BLOCK"]}if(aj==="}"){return[aj,"TK_END_BLOCK"]}if(aj===";"){return[aj,"TK_SEMICOLON"]}if(aj==="/"){var ag="";var ak=true;if(c.charAt(n)==="*"){n+=1;if(n<v){while(!(c.charAt(n)==="*"&&c.charAt(n+1)&&c.charAt(n+1)==="/")&&n<v){aj=c.charAt(n);ag+=aj;if(aj==="\x0d"||aj==="\x0a"){ak=false}n+=1;if(n>=v){break}}}n+=2;if(ak){return["/*"+ag+"*/","TK_INLINE_COMMENT"]}else{return["/*"+ag+"*/","TK_BLOCK_COMMENT"]}}if(c.charAt(n)==="/"){ag=aj;while(c.charAt(n)!=="\r"&&c.charAt(n)!=="\n"){ag+=c.charAt(n);n+=1;if(n>=v){break}}n+=1;if(Q){B()}return[ag,"TK_COMMENT"]}}if(aj==="'"||aj==='"'||(aj==="/"&&((P==="TK_WORD"&&J(l,["return","do"]))||(P==="TK_COMMENT"||P==="TK_START_EXPR"||P==="TK_START_BLOCK"||P==="TK_END_BLOCK"||P==="TK_OPERATOR"||P==="TK_EQUALS"||P==="TK_EOF"||P==="TK_SEMICOLON")))){var an=aj;var ai=false;var ab=aj;if(n<v){if(an==="/"){var ah=false;while(ai||ah||c.charAt(n)!==an){ab+=c.charAt(n);if(!ai){ai=c.charAt(n)==="\\";if(c.charAt(n)==="["){ah=true}else{if(c.charAt(n)==="]"){ah=false}}}else{ai=false}n+=1;if(n>=v){return[ab,"TK_STRING"]}}}else{while(ai||c.charAt(n)!==an){ab+=c.charAt(n);if(!ai){ai=c.charAt(n)==="\\"}else{ai=false}n+=1;if(n>=v){return[ab,"TK_STRING"]}}}}n+=1;ab+=an;if(an==="/"){while(n<v&&J(c.charAt(n),V)){ab+=c.charAt(n);n+=1}}return[ab,"TK_STRING"]}if(aj==="#"){if(C.length===0&&c.charAt(n)==="!"){ab=aj;while(n<v&&aj!="\n"){aj=c.charAt(n);ab+=aj;n+=1}C.push(a(ab)+"\n");B();return U()}var ae="#";if(n<v&&J(c.charAt(n),Y)){do{aj=c.charAt(n);ae+=aj;n+=1}while(n<v&&aj!=="#"&&aj!=="=");if(aj==="#"){}else{if(c.charAt(n)==="["&&c.charAt(n+1)==="]"){ae+="[]";n+=2}else{if(c.charAt(n)==="{"&&c.charAt(n+1)==="}"){ae+="{}";n+=2}}}return[ae,"TK_WORD"]}}if(aj==="<"&&c.substring(n-1,n+3)==="<!--"){n+=3;s.in_html_comment=true;return["<!--","TK_COMMENT"]}if(aj==="-"&&s.in_html_comment&&c.substring(n-1,n+2)==="-->"){s.in_html_comment=false;n+=2;if(Q){B()}return["-->","TK_COMMENT"]}if(J(aj,g)){while(n<v&&J(aj+c.charAt(n),g)){aj+=c.charAt(n);n+=1;if(n>=v){break}}if(aj==="="){return[aj,"TK_EQUALS"]}else{return[aj,"TK_OPERATOR"]}}return[aj,"TK_UNKNOWN"]}Z="";while(I>0){Z+=h;I-=1}c=d;A="";P="TK_START_EXPR";l="";w="";C=[];E=false;F="\n\r\t ".split("");V="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_$".split("");Y="0123456789".split("");g="+ - * / % & ++ -- = += -= *= /= %= == === != !== > < >= <= >> << >>> >>>= >>= <<= && &= | || ! !! , : ? ^ ^= |= ::".split(" ");u="continue,try,throw,return,var,if,switch,case,default,for,while,break,function".split(",");e=[];m("BLOCK");n=0;while(true){var R=U(n);p=R[0];T=R[1];if(T==="TK_EOF"){break}switch(T){case"TK_START_EXPR":if(p==="["){if(P==="TK_WORD"||l===")"){if(J(l,u)){y()}m("(EXPRESSION)");H();break}if(s.mode==="[EXPRESSION]"||s.mode==="[INDENTED-EXPRESSION]"){if(w==="]"&&l===","){if(s.mode==="[EXPRESSION]"){s.mode="[INDENTED-EXPRESSION]";if(!k){o()}}m("[EXPRESSION]");if(!k){B()}}else{if(l==="["){if(s.mode==="[EXPRESSION]"){s.mode="[INDENTED-EXPRESSION]";if(!k){o()}}m("[EXPRESSION]");if(!k){B()}}else{m("[EXPRESSION]")}}}else{m("[EXPRESSION]")}}else{m("(EXPRESSION)")}if(l===";"||P==="TK_START_BLOCK"){B()}else{if(P==="TK_END_EXPR"||P==="TK_START_EXPR"||P==="TK_END_BLOCK"||l==="."){}else{if(P!=="TK_WORD"&&P!=="TK_OPERATOR"){y()}else{if(A==="function"||A==="typeof"){if(q){y()}}else{if(J(l,u)||l==="catch"){y()}}}}}H();break;case"TK_END_EXPR":if(p==="]"){if(k){if(l==="}"){M();H();f();break}}else{if(s.mode==="[INDENTED-EXPRESSION]"){if(l==="]"){f();B();H();break}}}}f();H();break;case"TK_START_BLOCK":if(A==="do"){m("DO_BLOCK")}else{m("BLOCK")}if(O=="expand"){if(P!=="TK_OPERATOR"){if(l==="return"||l==="="){y()}else{B(true)}}H();o()}else{if(P!=="TK_OPERATOR"&&P!=="TK_START_EXPR"){if(P==="TK_START_BLOCK"){B()}else{y()}}else{if(L(s.previous_mode)&&l===","){if(w==="}"){y()}else{B()}}}o();H()}break;case"TK_END_BLOCK":f();if(O=="expand"){if(l!=="{"){B()}H()}else{if(P==="TK_START_BLOCK"){if(aa){M()}else{r()}}else{if(L(s.mode)&&k){k=false;B();k=true}else{B()}}H()}break;case"TK_WORD":if(E){y();H();y();E=false;break}if(p==="function"){if(s.var_line){s.var_line_reindented=true}if((aa||l===";")&&l!=="{"){j=aa?j:0;if(!S){j=1}for(var X=0;X<2-j;X++){B(false)}}}if(p==="case"||p==="default"){if(l===":"){M()}else{s.indentation_level--;B();s.indentation_level++}H();s.in_case=true;break}N="NONE";if(P==="TK_END_BLOCK"){if(!J(p.toLowerCase(),["else","catch","finally"])){N="NEWLINE"}else{if(O=="expand"||O=="end-expand"){N="NEWLINE"}else{N="SPACE";y()}}}else{if(P==="TK_SEMICOLON"&&(s.mode==="BLOCK"||s.mode==="DO_BLOCK")){N="NEWLINE"}else{if(P==="TK_SEMICOLON"&&D(s.mode)){N="SPACE"}else{if(P==="TK_STRING"){N="NEWLINE"}else{if(P==="TK_WORD"){if(l==="else"){r(true)}N="SPACE"}else{if(P==="TK_START_BLOCK"){N="NEWLINE"}else{if(P==="TK_END_EXPR"){y();N="NEWLINE"}}}}}}}if(J(p,u)&&l!==")"){if(l=="else"){N="SPACE"}else{N="NEWLINE"}}if(s.if_line&&P==="TK_END_EXPR"){s.if_line=false}if(J(p.toLowerCase(),["else","catch","finally"])){if(P!=="TK_END_BLOCK"||O=="expand"||O=="end-expand"){B()}else{r(true);y()}}else{if(N==="NEWLINE"){if((P==="TK_START_EXPR"||l==="="||l===",")&&p==="function"){}else{if(p==="function"&&l=="new"){y()}else{if(l==="return"||l==="throw"){y()}else{if(P!=="TK_END_EXPR"){if((P!=="TK_START_EXPR"||p!=="var")&&l!==":"){if(p==="if"&&A==="else"&&l!=="{"){y()}else{s.var_line=false;s.var_line_reindented=false;B()}}}else{if(J(p,u)&&l!=")"){s.var_line=false;s.var_line_reindented=false;B()}}}}}}else{if(L(s.mode)&&l===","&&w==="}"){B()}else{if(N==="SPACE"){y()}}}}H();A=p;if(p==="var"){s.var_line=true;s.var_line_reindented=false;s.var_line_tainted=false}if(p==="if"){s.if_line=true}if(p==="else"){s.if_line=false}break;case"TK_SEMICOLON":H();s.var_line=false;s.var_line_reindented=false;if(s.mode=="OBJECT"){s.mode="BLOCK"}break;case"TK_STRING":if(P==="TK_START_BLOCK"||P==="TK_END_BLOCK"||P==="TK_SEMICOLON"){B()}else{if(P==="TK_WORD"){y()}}H();break;case"TK_EQUALS":if(s.var_line){s.var_line_tainted=true}y();H();y();break;case"TK_OPERATOR":var b=true;var G=true;if(s.var_line&&p===","&&(D(s.mode))){s.var_line_tainted=false}if(s.var_line){if(p===","){if(s.var_line_tainted){H();s.var_line_reindented=true;s.var_line_tainted=false;B();break}else{s.var_line_tainted=false}}}if(l==="return"||l==="throw"){y();H();break}if(p===":"&&s.in_case){H();B();s.in_case=false;break}if(p==="::"){H();break}if(p===","){if(s.var_line){if(s.var_line_tainted){H();B();s.var_line_tainted=false}else{H();y()}}else{if(P==="TK_END_BLOCK"&&s.mode!=="(EXPRESSION)"){H();if(s.mode==="OBJECT"&&l==="}"){B()}else{y()}}else{if(s.mode==="OBJECT"){H();B()}else{H();y()}}}break}else{if(J(p,["--","++","!"])||(J(p,["-","+"])&&(J(P,["TK_START_BLOCK","TK_START_EXPR","TK_EQUALS","TK_OPERATOR"])||J(l,u)))){b=false;G=false;if(l===";"&&D(s.mode)){b=true}if(P==="TK_WORD"&&J(l,u)){b=true}if(s.mode==="BLOCK"&&(l==="{"||l===";")){B()}}else{if(p==="."){b=false}else{if(p===":"){if(s.ternary_depth==0){s.mode="OBJECT";b=false}else{s.ternary_depth-=1}}else{if(p==="?"){s.ternary_depth+=1}}}}}if(b){y()}H();if(G){y()}if(p==="!"){}break;case"TK_BLOCK_COMMENT":var K=p.split(/\x0a|\x0d\x0a/);if(/^\/\*\*/.test(p)){B();C.push(K[0]);for(X=1;X<K.length;X++){B();C.push(" ");C.push(a(K[X]))}}else{if(K.length>1){B();r()}else{y()}for(X=0;X<K.length;X++){C.push(K[X]);C.push("\n")}}B();break;case"TK_INLINE_COMMENT":y();H();if(D(s.mode)){y()}else{B()}break;case"TK_COMMENT":if(Q){B()}else{y()}H();B();break;case"TK_UNKNOWN":if(l==="return"||l==="throw"){y()}H();break}w=l;P=T;l=p}return C.join("").replace(/[\n ]+$/,"")}function style_html(f,i){var a,d,h,e,c;i=i||{};d=i.indent_size||4;h=i.indent_char||" ";c=i.brace_style||"collapse";e=i.max_char||"70";function b(){this.pos=0;this.token="";this.current_mode="CONTENT";this.tags={parent:"parent1",parentcount:1,parent1:""};this.tag_type="";this.token_text=this.last_token=this.last_text=this.token_type="";this.Utils={whitespace:"\n\r\t ".split(""),single_token:"br,input,link,meta,!doctype,basefont,base,area,hr,wbr,param,img,isindex,?xml,embed".split(","),extra_liners:"head,body,/html".split(","),in_array:function(l,j){for(var k=0;k<j.length;k++){if(l===j[k]){return true}}return false}};this.get_content=function(){var j="";var l=[];var m=false;while(this.input.charAt(this.pos)!=="<"){if(this.pos>=this.input.length){return l.length?l.join(""):["","TK_EOF"]}j=this.input.charAt(this.pos);this.pos++;this.line_char_count++;if(this.Utils.in_array(j,this.Utils.whitespace)){if(l.length){m=true}this.line_char_count--;continue}else{if(m){if(this.line_char_count>=this.max_char){l.push("\n");for(var k=0;k<this.indent_level;k++){l.push(this.indent_string)}this.line_char_count=0}else{l.push(" ");this.line_char_count++}m=false}}l.push(j)}return l.length?l.join(""):""};this.get_script=function(){var j="";var l=[];var m=new RegExp("<\/script>","igm");m.lastIndex=this.pos;var k=m.exec(this.input);var n=k?k.index:this.input.length;while(this.pos<n){if(this.pos>=this.input.length){return l.length?l.join(""):["","TK_EOF"]}j=this.input.charAt(this.pos);this.pos++;l.push(j)}return l.length?l.join(""):""};this.record_tag=function(j){if(this.tags[j+"count"]){this.tags[j+"count"]++;this.tags[j+this.tags[j+"count"]]=this.indent_level}else{this.tags[j+"count"]=1;this.tags[j+this.tags[j+"count"]]=this.indent_level}this.tags[j+this.tags[j+"count"]+"parent"]=this.tags.parent;this.tags.parent=j+this.tags[j+"count"]};this.retrieve_tag=function(j){if(this.tags[j+"count"]){var k=this.tags.parent;while(k){if(j+this.tags[j+"count"]===k){break}k=this.tags[k+"parent"]}if(k){this.indent_level=this.tags[j+this.tags[j+"count"]];this.tags.parent=this.tags[k+"parent"]}delete this.tags[j+this.tags[j+"count"]+"parent"];delete this.tags[j+this.tags[j+"count"]];if(this.tags[j+"count"]==1){delete this.tags[j+"count"]}else{this.tags[j+"count"]--}}};this.get_tag=function(){var j="";var l=[];var n=false;do{if(this.pos>=this.input.length){return l.length?l.join(""):["","TK_EOF"]}j=this.input.charAt(this.pos);this.pos++;this.line_char_count++;if(this.Utils.in_array(j,this.Utils.whitespace)){n=true;this.line_char_count--;continue}if(j==="'"||j==='"'){if(!l[1]||l[1]!=="!"){j+=this.get_unformatted(j);n=true}}if(j==="="){n=false}if(l.length&&l[l.length-1]!=="="&&j!==">"&&n){if(this.line_char_count>=this.max_char){this.print_newline(false,l);this.line_char_count=0}else{l.push(" ");this.line_char_count++}n=false}l.push(j)}while(j!==">");var o=l.join("");var m;if(o.indexOf(" ")!=-1){m=o.indexOf(" ")}else{m=o.indexOf(">")}var k=o.substring(1,m).toLowerCase();if(o.charAt(o.length-2)==="/"||this.Utils.in_array(k,this.Utils.single_token)){this.tag_type="SINGLE"}else{if(k==="script"){this.record_tag(k);this.tag_type="SCRIPT"}else{if(k==="style"){this.record_tag(k);this.tag_type="STYLE"}else{if(k==="a"){var p=this.get_unformatted("</a>",o);l.push(p);this.tag_type="SINGLE"}else{if(k.charAt(0)==="!"){if(k.indexOf("[if")!=-1){if(o.indexOf("!IE")!=-1){var p=this.get_unformatted("-->",o);l.push(p)}this.tag_type="START"}else{if(k.indexOf("[endif")!=-1){this.tag_type="END";this.unindent()}else{if(k.indexOf("[cdata[")!=-1){var p=this.get_unformatted("]]>",o);l.push(p);this.tag_type="SINGLE"}else{var p=this.get_unformatted("-->",o);l.push(p);this.tag_type="SINGLE"}}}}else{if(k.charAt(0)==="/"){this.retrieve_tag(k.substring(1));this.tag_type="END"}else{this.record_tag(k);this.tag_type="START"}if(this.Utils.in_array(k,this.Utils.extra_liners)){this.print_newline(true,this.output)}}}}}}return l.join("")};this.get_unformatted=function(k,m){if(m&&m.indexOf(k)!=-1){return""}var j="";var n="";var o=true;do{if(this.pos>=this.input.length){return n}j=this.input.charAt(this.pos);this.pos++;if(this.Utils.in_array(j,this.Utils.whitespace)){if(!o){this.line_char_count--;continue}if(j==="\n"||j==="\r"){n+="\n";for(var l=0;l<this.indent_level;l++){n+=this.indent_string}o=false;this.line_char_count=0;continue}}n+=j;this.line_char_count++;o=true}while(n.indexOf(k)==-1);return n};this.get_token=function(){var k;if(this.last_token==="TK_TAG_SCRIPT"){var j=this.get_script();if(typeof j!=="string"){return j}k=js_beautify(j,{indent_size:this.indent_size,indent_char:this.indent_character,indent_level:this.indent_level,brace_style:this.brace_style});return[k,"TK_CONTENT"]}if(this.current_mode==="CONTENT"){k=this.get_content();if(typeof k!=="string"){return k}else{return[k,"TK_CONTENT"]}}if(this.current_mode==="TAG"){k=this.get_tag();if(typeof k!=="string"){return k}else{var l="TK_TAG_"+this.tag_type;return[k,l]}}};this.printer=function(m,l,j,o,n){this.input=m||"";this.output=[];this.indent_character=l;this.indent_string="";this.indent_size=j;this.brace_style=n;this.indent_level=0;this.max_char=o;this.line_char_count=0;for(var k=0;k<this.indent_size;k++){this.indent_string+=this.indent_character}this.print_newline=function(r,p){this.line_char_count=0;if(!p||!p.length){return}if(!r){while(this.Utils.in_array(p[p.length-1],this.Utils.whitespace)){p.pop()}}p.push("\n");for(var q=0;q<this.indent_level;q++){p.push(this.indent_string)}};this.print_token=function(p){this.output.push(p)};this.indent=function(){this.indent_level++};this.unindent=function(){if(this.indent_level>0){this.indent_level--}}};return this}a=new b();a.printer(f,h,d,80,c);while(true){var g=a.get_token();a.token_text=g[0];a.token_type=g[1];if(a.token_type==="TK_EOF"){break}switch(a.token_type){case"TK_TAG_START":case"TK_TAG_SCRIPT":case"TK_TAG_STYLE":a.print_newline(false,a.output);a.print_token(a.token_text);a.indent();a.current_mode="CONTENT";break;case"TK_TAG_END":a.print_newline(true,a.output);a.print_token(a.token_text);a.current_mode="CONTENT";break;case"TK_TAG_SINGLE":a.print_newline(false,a.output);a.print_token(a.token_text);a.current_mode="CONTENT";break;case"TK_CONTENT":if(a.token_text!==""){a.print_newline(false,a.output);a.print_token(a.token_text)}a.current_mode="TAG";break}a.last_token=a.token_type;a.last_text=a.token_text}return a.output.join("")}$.fn.input=function(a){var b=this;if(!a){return b.trigger("keydown.input")}return b.bind({"input.input":function(c){b.unbind("keydown.input");a.call(this,c)},"keydown.input":function(c){a.call(this,c)}})};$.fn.insertAtCaret=function(a){return this.each(function(){var d=this;if(document.selection){d.focus();sel=document.selection.createRange();sel.text=a;d.focus()}else{if(d.selectionStart||d.selectionStart==0){var c=d.selectionStart,b=d.selectionEnd,e=d.scrollTop;d.value=d.value.substring(0,c)+a+d.value.substring(b,d.value.length);d.focus();d.selectionStart=c+a.length;d.selectionEnd=c+a.length;d.scrollTop=e}else{d.value+=a;d.focus()}}})};$(function(){$.fn.addScript=function(x,y){return this.click(function(z){if(!~b.val().indexOf(x)){b.insertAtCaret('<script src="//'+(y?"www.cinsoft.net/":"ajax.googleapis.com/ajax/libs/")+x+'.js">\x3C/script>\n')}b.focus();z.preventDefault()})};var o=$("#title"),q=$("#slug"),n=$("mark"),u=$("#tests"),b=$("#prep-html"),p=$("#prep-js"),v=p.add("#setup, #teardown"),w='<h4>Test 1</h4><div><label for="test[1][title]">Title <em title="This field is required">*</em> </label><input type="text" name="test[1][title]" id="test[1][title]"></div><div><label for="test[1][defer]">Async </label><label class="inline"><input type="checkbox" value="y" name="test[1][defer]" id="test[1][defer]"> (check if this is an <a href="/faq#async">asynchronous test</a>)</label></div><div><label for="test[1][code]">Code <em title="This field is required">*</em> </label><textarea name="test[1][code]" class="code-js" id="test[1][code]"></textarea></div></fieldset>',c=$("fieldset",u).length,f=$('<button id="add-test" title="Add another code snippet to the test case">Add code snippet</button>').insertBefore(".submit"),s=$('<button id="beautify" title="Beautify all code fields (HTML and JavaScript)">Beautify code</button>').insertBefore(f),h=$('<button id="add-jquery">jQuery</button>').addScript("jquery/1/jquery.min"),r=$('<button id="add-mootools">MooTools</button>').addScript("mootools/1.3/mootools-yui-compressed"),e=$('<button id="add-yui">YUI</button>').addScript("yui/2.9.0/build/yuiloader/yuiloader-min"),m=$('<button id="add-prototype">Prototype</button>').addScript("prototype/1/prototype"),i=$('<button id="add-dojo">Dojo</button>').addScript("dojo/1/dojo/dojo.xd"),d=$('<button id="add-ext">Ext Core</button>').addScript("ext-core/3/ext-core"),g=$('<button id="add-ext">My Library</button>').addScript("mylib099-min",true),j=$('<div id="add-buttons" />'),t=(function(){try{var y=window.localStorage;return y.getItem&&y}catch(x){}}()),a;function l(x){return x.toLowerCase().match(/[a-z0-9]+/ig).join("-")}function k(z){var y=this,x=z=="html"?style_html:js_beautify;y.value=x(y.value,{indent_size:2,indent_char:" "})}if(t){a=$("#author, #author-email, #author-url");if(a.length==a.filter(function(){return !this.value}).length){a.each(function(){this.value=t[this.id]||""}).input(function(){t[this.id]=this.value})}}f.click(function(x){$(w.replace(/1/g,++c)).appendTo(u);x.preventDefault()});j.append(h).append(m).append(r).append(e).append(i).append(d).append(g).insertBefore("#add-libraries");if(q.length){o.input(function(){if(!q.data("x")){if(""===$.trim(this.value)){q.val("");n.text("slug");return}var x=l(this.value);q.val(x);n.text(x)}}).trigger("keyup");q.input(function(){if(""===$.trim(this.value)){if(""===$.trim(o.val())){return n.text("slug")}else{return n.text(l(o.val()))}}n.text(l(this.value))});q.change(function(){q.val(l(this.value));var y=true;if(""===$.trim(q.val())){y=false;var z=l(o.val());q.val(z);n.text(z)}q.data("x",y)})}$("#question").val("no");s.click(function(x){v.add(".code-js").each(k);k.call(b[0],"html");x.preventDefault()})});var _gaq=[["_setAccount","UA-6065217-40"],["_trackPageview"]];(function(e,a){var c=e.createElement(a),b=e.getElementsByTagName(a)[0];c.src="//www.google-analytics.com/ga.js";b.parentNode.insertBefore(c,b)}(document,"script"));